/dts-v1/;

#include "zynqmp.dtsi"
#include "zynqmp-clk-ccf.dtsi"
#include "zynqmp_enclustra_common.dtsi"
#include "zynqmp_enclustra_mercury_xu5.dtsi"
#include "zynq-enclustra-qspi64-parts.dtsi"
#include <dt-bindings/interrupt-controller/irq.h>

/*
 * pg201-zynq-ultrascale-plus-processing-system.pdf (PG201 January 6, 2020), Table 2-1
 * * * * * * * * * * *
 * IRQ PL->PS
 * * * * * * * * * * *
 * 121  pl_ps_irq0[0]
 * 122  pl_ps_irq0[1]
 * 123  pl_ps_irq0[2]
 * 124  pl_ps_irq0[3]
 * 125  pl_ps_irq0[4]
 * 126  pl_ps_irq0[5]
 * 127  pl_ps_irq0[6]
 * 128  pl_ps_irq0[7]
 * * * * * * * * * * *
 * IRQ PS->PL
 * * * * * * * * * * *
 * 137  pl_ps_irq1[0]
 * 138  pl_ps_irq1[1]
 * 139  pl_ps_irq1[2]
 * 140  pl_ps_irq1[3]
 * 141  pl_ps_irq1[4]
 * 142  pl_ps_irq1[5]
 * 143  pl_ps_irq1[6]
 * 144  pl_ps_irq1[7]
 * * * * * * * * * * *
 * The IRQ Number in the devicetree
 * is determined as follows:
 * for pl_ps_irq_0: IRQ_devicetree = IRQ - 32
 * for pl_ps_irq_1: IRQ_devicetree = IRQ - 33
 */

#define USE_GEM0	1
#define USE_GEM1	0
#define ENCLUSTRA	0
#define SPI_ENABLED	1
#define SPI_PINCTRL	0


/ {
	model = "Enclustra XU5 SOM";
	compatible = "xlnx,zynqmp";

	aliases {
#if USE_GEM0
		ethernet0 = &gem0;
#endif
#if USE_GEM1
		ethernet1 = &gem1;
#endif
		gpio0 = &gpio;
		i2c0 = &i2c0;
		mmc0 = &sdhci1;
		mmc1 = &sdhci0;
		rtc0 = &rtc;
		serial0 = &uart0;
		serial1 = &uart1;
		serial2 = &dcc;
#if 0
		spi0 = &spi0;
		spi1 = &spi1;
#else
		spi1 = &spi0;
		spi2 = &spi1;
		spi0 = &qspi;
#endif
		usb0 = &usb0;
		//usb1 = &usb1;
	};

	chosen {
		bootargs = "console=ttyPS0,115200n8 earlycon clk_ignore_unused cpuidle.off=1";
		stdout-path = "serial0:115200n8";
	};

	memory {
		device_type = "memory";
		//reg = <0x0 0x0 0x0 0x80000000>;
		reg = <0x0 0x0 0x0 0x80000000>, <0x8 0x00000000 0x0 0x80000000>;
	};

#if USE_GEM0
#if ENCLUSTRA
	mdio0 {
		compatible = "cdns,macb-mdio";
		reg = <0x0 0xff0b0000 0x0 0x1000>;
		clocks =  <&zynqmp_clk 45>, <&zynqmp_clk 45>, <&zynqmp_clk 49>;
		clock-names = "pclk", "tx_clk", "hclk";
		#address-cells = <1>;
		#size-cells = <0>;
		phy0: ethernet-phy@3 {
			reg = <3>;
			txc-skew-ps = <1800>;
			txen-skew-ps = <420>;
			txd0-skew-ps = <420>;
			txd1-skew-ps = <420>;
			txd2-skew-ps = <420>;
			txd3-skew-ps = <420>;
			rxc-skew-ps = <900>;
			rxdv-skew-ps = <420>;
			rxd0-skew-ps = <420>;
			rxd1-skew-ps = <420>;
			rxd2-skew-ps = <420>;
			rxd3-skew-ps = <420>;
		};
	};
#endif
#endif

#if USE_GEM1
	mdio1 {
		compatible = "cdns,macb-mdio";
		reg = <0x0 0xff0c0000 0x0 0x1000>;
		clocks =  <&zynqmp_clk 45>, <&zynqmp_clk 45>, <&zynqmp_clk 49>;
		clock-names = "pclk", "tx_clk", "hclk";
		#address-cells = <1>;
		#size-cells = <0>;
		phy1: ethernet-phy@3 {
			reg = <3>;
			txc-skew-ps = <1800>;
			txen-skew-ps = <420>;
			txd0-skew-ps = <420>;
			txd1-skew-ps = <420>;
			txd2-skew-ps = <420>;
			txd3-skew-ps = <420>;
			rxc-skew-ps = <1860>;
			rxdv-skew-ps = <420>;
			rxd0-skew-ps = <0>;
			rxd1-skew-ps = <0>;
			rxd2-skew-ps = <0>;
			rxd3-skew-ps = <0>;
		};
	};
#endif

	regulator_vref: fixedregulator@0 {
		compatible = "regulator-fixed";
		regulator-name = "VREF";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		regulator-boot-on;
		regulator-always-on;
	};


	audio_clock: audio_clock {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <12288000>;
	};

	zed_sound {
		compatible = "simple-audio-card";
		simple-audio-card,name = "ZED ADAU1761";
		simple-audio-card,widgets =
			"Microphone", "Mic In",
			"Headphone", "Headphone Out",
			"Line", "Line In",
			"Line", "Line Out";
		simple-audio-card,routing =
			"Line Out", "LOUT",
			"Line Out", "ROUT",
			"Headphone Out", "LHP",
			"Headphone Out", "RHP",
			"Mic In", "MICBIAS",
			"LINN", "Mic In",
			"RINN", "Mic In",
			"LAUX", "Line In",
			"RAUX", "Line In";

		simple-audio-card,dai-link@0 {
			format = "i2s";
			cpu {
				sound-dai = <&axi_i2s_0>;
				frame-master;
				bitclock-master;
			};
			codec {
				sound-dai = <&adau1761>;
			};
		};
	};
};

&dcc {
	status = "okay";
};

#if USE_GEM0
#if ENCLUSTRA
&gem0 {
	status = "okay";
	local-mac-address = [00 0a 35 00 02 90];
	phy = <&phy0>;
	phy-mode = "rgmii-id";
	phy-handle = <&phy0>;
};
#else
&gem0 {
	status = "okay";
	phy-handle = <&phy0>;
	phy-mode = "rgmii-id";
	phy0: phy@3 {
		reg = <3>;
		txc-skew-ps = <1800>;
		txen-skew-ps = <420>;
		txd0-skew-ps = <420>;
		txd1-skew-ps = <420>;
		txd2-skew-ps = <420>;
		txd3-skew-ps = <420>;
		rxc-skew-ps = <900>;
		rxdv-skew-ps = <420>;
		rxd0-skew-ps = <420>;
		rxd1-skew-ps = <420>;
		rxd2-skew-ps = <420>;
		rxd3-skew-ps = <420>;
	};
};
#endif
#endif

#if USE_GEM1
&gem1 {
	status = "okay";
	local-mac-address = [00 0a 35 00 02 91];
	phy = <&phy1>;
	phy-mode = "gmii-id";
	phy-handle = <&phy1>;
};
#endif

/ {
	fpga_axi: fpga-axi@0 {
		interrupt-parent = <&gic>;
		compatible = "simple-bus";
		#address-cells = <0x1>;
		#size-cells = <0x1>;
		ranges = <0 0 0 0xffffffff>;

		i2s_tx_dma: i2s-tx-dmac@9c510000 {
			compatible = "adi,axi-dmac-1.00.a";
			reg = <0x9c510000 0x10000>;
			#dma-cells = <1>;
			#clock-cells = <0>;
			interrupts = <0 89 IRQ_TYPE_LEVEL_HIGH>; // pl_ps_irq0[0] = 121  ->  121-32 = 89
			clocks = <&zynqmp_clk 71>;

			adi,channels {
				#size-cells = <0>;
				#address-cells = <1>;

				dma-channel@0 {
					reg = <0>;
					adi,source-bus-width = <64>;
					adi,source-bus-type = <0>;
					adi,destination-bus-width = <32>;
					adi,destination-bus-type = <1>;
				};
			};
		};

		i2s_rx_dma: i2s-rx-dmac@9c500000 {
			compatible = "adi,axi-dmac-1.00.a";
			reg = <0x9c500000 0x10000>;
			#dma-cells = <1>;
			#clock-cells = <0>;
			interrupts = <0 90 IRQ_TYPE_LEVEL_HIGH>; // pl_ps_irq0[1] = 122  ->  122-32 = 90
			clocks = <&zynqmp_clk 71>;

			adi,channels {
				#size-cells = <0>;
				#address-cells = <1>;

				dma-channel@0 {
					reg = <0>;
					adi,source-bus-width = <32>;
					adi,source-bus-type = <1>;
					adi,destination-bus-width = <64>;
					adi,destination-bus-type = <0>;
				};
			};
		};

		axi_i2s_0: axi-i2s@0x97600000 {
			compatible = "adi,axi-i2s-1.00.a";
			reg = <0x97600000 0x10000>;
			dmas = <&i2s_tx_dma 0 &i2s_rx_dma 0>;
			dma-names = "tx", "rx";
			clocks = <&zynqmp_clk 71>, <&audio_clock>;
			clock-names = "axi", "ref";

			#sound-dai-cells = <0>;
		};

		rx0_dma: rx0-dma@9c400000 {
			compatible = "adi,axi-dmac-1.00.a";
			reg = <0x9c400000 0x10000>;
			#dma-cells = <1>;
			#clock-cells = <0>;
			interrupts = <0 91 IRQ_TYPE_LEVEL_HIGH>; // pl_ps_irq0[2] = 123  ->  123-32 = 91
			clocks = <&zynqmp_clk 71>;

			adi,channels {
				#address-cells = <1>;
				#size-cells = <0>;

				dma-channel@0 {
					reg = <0>;
					adi,source-bus-width = <32>;
					adi,source-bus-type = <2>;
					adi,destination-bus-width = <64>;
					adi,destination-bus-type = <0>;
				};
			};
		};

		rx1_dma: rx1-dma@9c410000 {
			compatible = "adi,axi-dmac-1.00.a";
			reg = <0x9c410000 0x10000>;
			#dma-cells = <1>;
			#clock-cells = <0>;
			interrupts = <0 92 IRQ_TYPE_LEVEL_HIGH>; // pl_ps_irq0[2] = 123  ->  123-32 = 92
			clocks = <&zynqmp_clk 71>;

			adi,channels {
				#address-cells = <1>;
				#size-cells = <0>;

				dma-channel@0 {
					reg = <0>;
					adi,source-bus-width = <32>;
					adi,source-bus-type = <2>;
					adi,destination-bus-width = <64>;
					adi,destination-bus-type = <0>;
				};
			};
		};

		rx2_dma: rx2-dma@9c420000 {
			compatible = "adi,axi-dmac-1.00.a";
			reg = <0x9c420000 0x10000>;
			#dma-cells = <1>;
			#clock-cells = <0>;
			interrupts = <0 93 IRQ_TYPE_LEVEL_HIGH>; // pl_ps_irq0[2] = 123  ->  123-32 = 93
			clocks = <&zynqmp_clk 71>;

			adi,channels {
				#address-cells = <1>;
				#size-cells = <0>;

				dma-channel@0 {
					reg = <0>;
					adi,source-bus-width = <32>;
					adi,source-bus-type = <2>;
					adi,destination-bus-width = <64>;
					adi,destination-bus-type = <0>;
				};
			};
		};

		rx3_dma: rx3-dma@9c430000 {
			compatible = "adi,axi-dmac-1.00.a";
			reg = <0x9c430000 0x10000>;
			#dma-cells = <1>;
			#clock-cells = <0>;
			interrupts = <0 94 IRQ_TYPE_LEVEL_HIGH>; // pl_ps_irq0[2] = 123  ->  123-32 = 94
			clocks = <&zynqmp_clk 71>;

			adi,channels {
				#address-cells = <1>;
				#size-cells = <0>;

				dma-channel@0 {
					reg = <0>;
					adi,source-bus-width = <32>;
					adi,source-bus-type = <2>;
					adi,destination-bus-width = <64>;
					adi,destination-bus-type = <0>;
				};
			};
		};

		cf_ltc2158_core_0: cf-ddc0-dma@99020000 {
			compatible = "pcw,axi-ltc2158";
			reg = <0x99020000 0x10000>;
			dmas = <&rx0_dma 0>;
			dma-names = "rx";
			spibus-connected = <&adc_ltc2158>;
			xlnx,dphase-timeout = <0x8>;
			xlnx,num-mem = <0x1>;
			xlnx,num-reg = <0x1>;
			xlnx,s-axi-min-size = <0x1ff>;
			xlnx,slv-awidth = <0x20>;
			xlnx,slv-dwidth = <0x20>;
			xlnx,use-wstrb = <0x0>;
		};

		cf_ltc2158_core_1: cf-ddc1-dma@99020000 {
			compatible = "pcw,axi-ltc2158-dummy";
			reg = <0x99020000 0x10000>;
			dmas = <&rx1_dma 0>;
			dma-names = "rx";
			spibus-connected = <&adc_ltc2158>;
			xlnx,dphase-timeout = <0x8>;
			xlnx,num-mem = <0x1>;
			xlnx,num-reg = <0x1>;
			xlnx,s-axi-min-size = <0x1ff>;
			xlnx,slv-awidth = <0x20>;
			xlnx,slv-dwidth = <0x20>;
			xlnx,use-wstrb = <0x0>;
		};

		cf_ltc2158_core_2: cf-ddc2-dma@99020000 {
			compatible = "pcw,axi-ltc2158-dummy";
			reg = <0x99020000 0x10000>;
			dmas = <&rx2_dma 0>;
			dma-names = "rx";
			spibus-connected = <&adc_ltc2158>;
			xlnx,dphase-timeout = <0x8>;
			xlnx,num-mem = <0x1>;
			xlnx,num-reg = <0x1>;
			xlnx,s-axi-min-size = <0x1ff>;
			xlnx,slv-awidth = <0x20>;
			xlnx,slv-dwidth = <0x20>;
			xlnx,use-wstrb = <0x0>;
		};

		cf_ltc2158_core_3: cf-ddc3-dma@99020000 {
			compatible = "pcw,axi-ltc2158-dummy";
			reg = <0x99020000 0x10000>;
			dmas = <&rx3_dma 0>;
			dma-names = "rx";
			spibus-connected = <&adc_ltc2158>;
			xlnx,dphase-timeout = <0x8>;
			xlnx,num-mem = <0x1>;
			xlnx,num-reg = <0x1>;
			xlnx,s-axi-min-size = <0x1ff>;
			xlnx,slv-awidth = <0x20>;
			xlnx,slv-dwidth = <0x20>;
			xlnx,use-wstrb = <0x0>;
		};

		vbi_br_dsp: vbi-br-dsp@93C00000 {
			compatible = "fpga,vbi-br-dsp";
			reg = <0x93C00000 0x10000>;
			required,fs-adc = <276480000>;
			required,nb-of-blocks = <4>;
		};

	};

};

&uart0 {
	status = "okay";
};

&uart1 {
	status = "okay";
};

&i2c0 {
	clock-frequency = <400000>;

	ad5593r@10 {
		#size-cells = <0>;
		#address-cells = <1>;
		#gpio-cells = <2>;
		compatible = "adi,ad5593r";
		reg = <0x10>;
		gpio-controller;

		/*
		 * CH_MODE_UNUSED             0
		 * CH_MODE_ADC                1
		 * CH_MODE_DAC                2
		 * CH_MODE_DAC_AND_ADC        3
		 * CH_MODE_GPIO               8
		 *
		 * CH_OFFSTATE_PULLDOWN       0
		 * CH_OFFSTATE_OUT_LOW        1
		 * CH_OFFSTATE_OUT_HIGH       2
		 * CH_OFFSTATE_OUT_TRISTATE   3
		 */
		channel@0 {
			reg = <0>;
			adi,mode = <0>;        // CH_MODE_UNUSED
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@1 {
			reg = <1>;
			adi,mode = <0>;        // CH_MODE_UNUSED
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@2 {
			reg = <2>;
			adi,mode = <0>;        // CH_MODE_UNUSED
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@3 {
			reg = <3>;
			adi,mode = <1>;        // CH_MODE_ADC
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@4 {
			reg = <4>;
			adi,mode = <1>;        // CH_MODE_ADC
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@5 {
			reg = <5>;
			adi,mode = <0>;        // CH_MODE_UNUSED
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@6 {
			reg = <6>;
			adi,mode = <0>;        // CH_MODE_UNUSED
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
		channel@7 {
			reg = <7>;
			adi,mode = <0>;        // CH_MODE_UNUSED
			adi,off-state = <0>;   // CH_OFFSTATE_PULLDOWN
		};
	};

	pca9557@18 {
		compatible = "nxp,pca9557";
		reg = <0x18>;
	};

	ad7992: ad799x@23 {
            compatible = "ad7992";
            reg = <0x23>;
            adi,reference-voltage-mv = <3300>;
       };

	lm96080@2f {
		compatible = "national,lm80";
		reg = <0x2f>;
	};

	adau1761: adau1761@39 {
		compatible = "adi,adau1761";
		reg = <0x39>;

		clocks = <&audio_clock>;
		clock-names = "mclk";

		#sound-dai-cells = <0>;
	};

	tmp102@48 {
		compatible = "ti,tmp102";
		reg = <0x48>;
	};

	eeprom@50 { 				// Baseboard EEPROM
		compatible = "atmel,24c64";
		reg = <0x50>;
		pagesize = <32>;
	};

	eeprom@51 { 				// RX Modules Sec. AT24MAC402 EEPROM
		compatible = "atmel,24c02";
		reg = <0x51>;
		pagesize = <16>;
	};

	eeprom@52 {				// TX Modules Sec.AT24MAC402 EEPROM
		compatible = "atmel,24c02";
		reg = <0x52>;
		pagesize = <16>;
	};

	eeprom@54 { 				// Baseboard Sec. AT24MAC402 EEPROM
		compatible = "atmel,24c02";
		reg = <0x54>;
		pagesize = <16>;
	};

	eeprom@59 { 				// RX Modules Sec.AT24MAC402 EEPROM Serial
		compatible = "atmel,24cs02"; //
		reg = <0x59>;
		pagesize = <1>;
		//read-only;
	};

	eeprom@5a {				// TX Modules Sec.AT24MAC402 EEPROM Serial
		compatible = "atmel,24cs02";
		reg = <0x5a>;
		pagesize = <1>;
		//read-only;
	};

	eeprom@5c { 				// Baseboard Sec. AT24MAC402 EEPROM Serial
		compatible = "atmel,24cs02";
		reg = <0x5c>;
		pagesize = <1>;
		//read-only;
	};

	mcp4726@60 {
		compatible = "mcp4726";
		reg = <0x60>;
		//vref-supply = <&regulator_vref>;
		//vref-mv = <3300>;
		vref-mode = <3>;
		vref-millivolt = <3300>;
	};
};

/* SD1 with level shifter */
&sdhci1 {
        status = "okay";
        no-1-8-v;       /* for 1.0 silicon */
        wp-inverted;
        xlnx,mio_bank = <1>;
};

/* ULPI SMSC USB3320 */
&usb0 {
	status = "okay";
};

&usb1 {
        status = "disabled";
};

&dwc3_0 {
        status = "okay";
        dr_mode = "host";
        snps,usb3_lpm_capable;
        maximum-speed = "high-speed";
};

&dwc3_1 {
        status = "disabled";
        dr_mode = "host";
        snps,usb3_lpm_capable;
        maximum-speed = "high-speed";
};

#if SPI_ENABLED
&spi0 {
	is-decoded-cs = <1>;
	num-cs = <8>;
	status = "okay";

#if SPI_PINCTRL
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_spi0_default>;
#endif

	clk0_lmk04805: lmk04805@0 {
		#address-cells = <1>;
		#size-cells = <0>;
		#clock-cells = <1>;
		compatible = "lmk04805-1";
		reg = <0>;
		spi-max-frequency = <100000>;
		clock-output-names = "lmk04805-lpc_out0", "lmk04805-lpc_out1", "lmk04805-lpc_out2", "lmk04805-lpc_out3", "lmk04805-lpc_out4", "lmk04805-lpc_out5", "lmk04805-lpc_out6", "lmk04805-lpc_out7", "lmk04805-lpc_out8", "lmk04805-lpc_out9", "lmk04805-lpc_out10", "lmk04805-lpc_out11";
		lmk,vcxo-freq = <122880000>; // VCO = 2211.8MHz
		lmk,en-pll2-ref-2x;
		lmk,pll2-r = <2>;
		lmk,pll2-p = <2>;
		lmk,pll2-n = <9>;

		lmk04805_0_c0:channel@0 {
			reg = <0>;
			lmk,extended-name = "CLK_OUT";
			lmk,out-type = <4>; // 0: power down, 1: lvds, 2: LVPECL 700mV 3: LVPECL 1200mV, 4: LVPECL 1600mV, 5: LVPECL 2000mV, 6: LVCMOS (Norm/Inv), 7: Norm/Norm, 8: ...
			lmk,clock-divider = <56>;
			lmk,powerdown;
		};

		lmk04805_0_c1:channel@1 {
			reg = <1>;
			lmk,extended-name = "CLKout1";
			lmk,clock-divider = <56>;
			lmk,out-type = <0>;
			lmk,powerdown;
		};

		lmk04805_0_c2:channel@2 {
			reg = <2>;
			lmk,extended-name = "CLKout2";
			lmk,clock-divider = <2>;
			lmk,out-type = <0>;
			lmk,powerdown;
		};

		lmk04805_0_c3:channel@3 {
			reg = <3>;
			lmk,extended-name = "DAC_CLK"; // 1105.9MHz
			lmk,out-type = <4>;
			lmk,clock-divider = <2>;
			lmk,powerdown;
		};

		lmk04805_0_c4:channel@4 {
			reg = <4>;
			lmk,extended-name = "TX_CLK";
			lmk,out-type = <4>;
			lmk,clock-divider = <20>;
			lmk,powerdown;
		};

		lmk04805_0_c5:channel@5 {
			reg = <5>;
			lmk,extended-name = "CLKout5";
			lmk,clock-divider = <20>;
			lmk,out-type = <0>;
			lmk,powerdown;
		};

		lmk04805_0_c6:channel@6 {
			reg = <6>;
			lmk,extended-name = "FPGA_MGTCLK";
			lmk,out-type = <1>;
			lmk,clock-divider = <4>;
			lmk,powerdown;
		};

		lmk04805_0_c7:channel@7 {
			reg = <7>;
			lmk,extended-name = "DAC_DCO_CLK";
			lmk,out-type = <1>;
			lmk,clock-divider = <4>;
			lmk,powerdown;
		};

		lmk04805_0_c8:channel@8 {
			reg = <8>;
			lmk,extended-name = "RX_CLK"; // LMX Clk =  1105.92MHz
			lmk,out-type = <4>; // LVPECL 1.6Vpp, 150ohm zu GND m√ºssen auf dem Baseboard rein!
			lmk,clock-divider = <2>;
		};

		lmk04805_0_c9:channel@9 {
			reg = <9>;
			lmk,extended-name = "CLKout9";
			lmk,clock-divider = <2>;
			lmk,out-type = <0>;
			lmk,powerdown;
		};

		lmk04805_0_c10:channel@10 {
			reg = <10>;
			lmk,extended-name = "CLKout10";
			lmk,clock-divider = <8>;
			lmk,out-type = <0>;
			lmk,powerdown;
		};

		lmk04805_0_c11:channel@11 {
			reg = <11>;
			lmk,extended-name = "ADC_CLK"; // 276.48MHz
			lmk,out-type = <4>;
			lmk,clock-divider = <8>;
		};
	};

	adc_ltc2158: adc-ltc2158@1 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "pcw,ltc2158";
		reg = <1>;
		spi-max-frequency = <100000>;
//		spi-3wire;
		clock_inverted;
		//en-randomizer;
		clocks = <&clk0_lmk04805 11>;
		clock-names = "clkin";
	};
};

&spi1 {
	is-decoded-cs = <1>;
	num-cs = <8>;
	status = "okay";

	gen_shift_reg0: generic_shift_register@0 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "generic-shift-register";
		reg = <0>;
		spi-max-frequency = <10000>;
		optional,device-name = "BR-DB-Control-Register";
		optional,num-bits = <11>;
		optional,name-bit0 = "PRE_FILTER_SEL0";
		optional,name-bit1 = "PRE_FILTER_SEL1";
		optional,name-bit2 = "POST_FILTER_SEL0";
		optional,name-bit3 = "POST_FILTER_SEL1";
		optional,name-bit4 = "LF_PRE_LNA_EN";
		optional,name-bit5 = "";  // Rev B, this will omit that bit
		//optional,name-bit5 = "HF_PRE_LNA_EN"; // rev A
		optional,name-bit6 = "EN_LF_PATH";
		optional,name-bit7 = "LF_SEL_0_HFIN_TO_HF_1_HFIN_TO_LF";
		optional,name-bit8 = "PRE_ATT0"; // rev B
		optional,name-bit9 = "PRE_ATT1"; // rev B
		optional,name-bit10 = "RST_PSAT_FLAG"; // rev B
	};

	gen_shift_reg1: generic_shift_register@1 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "generic-shift-register";
		reg = <1>;
		spi-max-frequency = <10000>;
		optional,device-name = "Tunable-BPF";
		optional,num-bits = <8>;
		optional,name-bit0 = "D0";
		optional,name-bit1 = "D1";
		optional,name-bit2 = "D2";
		optional,name-bit3 = "D3";
		optional,name-bit4 = "D4";
		optional,name-bit5 = "DISABLE";
		optional,name-bit6 = "";  // this will omit that bit
		optional,name-bit7 = "";  // this will omit that bit
	};


	att_post_lna_pe43711: pe43711@2 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "pe43711";
		reg = <2>;
		spi-max-frequency = <10000>;
		optional,unique-id = "att_post_lna_pe43711";	// without this, the device will be named after the "compatible" entry (pe43711)
	};

// not on RevB
//	att_pre_mixer_pe43711: pe43711@3 {
//		#address-cells = <1>;
//		#size-cells = <0>;
//		compatible = "pe43711";
//		reg = <3>;
//		spi-max-frequency = <10000>;
//		optional,unique-id = "att_pre_mixer_pe43711";	// without this, the device will be named after the "compatible" entry (pe43711)
//	};


	lo1_synth: lmx2594@4 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "lmx2594";
		reg = <4>;
		spi-max-frequency = <10000>;
		optional,unique-id = "lmx2594_lo1_synth";
		optional,output-frequency-hz = /bits/ 64 <1>;
		optional,vco-frequency-hz = /bits/ 64 <2>;
		optional,output-enable = <3>;
		optional,mode = <4>;
		optional,aux-output-divider = <5>;
		optional,aux-output-enable = <6>;
	};
 };

#endif
